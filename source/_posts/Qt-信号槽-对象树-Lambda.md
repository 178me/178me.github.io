---
title: Qt_信号槽_对象树_Lambda
date: 2019-08-03 18:08:16
tags:
categories:
---

专门讲述信号槽、对象树的概念以及使用Lambda表达式

<!--more-->

# 信号与槽  

信号和槽是qt中很重要的一个机制，信号即发送者发送信号，槽即接收者处理信号所做的操作  

这里即引出名词： 发送者、信号、接收者、槽函数  

例如：发送者可以是一个按钮，点击它就是一个信号，这个信号连接着接收者，接受者对信号作出处理

在这里我们用connect方法来连接这些参数即`connect(sender,signal,receiver,method)`;

当遇到函数重载是我们可以使用函数指针来解决问题

我们还可以自定义信号还有槽函数  

自定义信号只需要函数声明即可，不需要具体实现。而槽函数就需要声明并且要有实现的代码。

信号和槽的函数的返回值都是void，但可以重载。

信号的参数个数可以大于槽的参数个数，但是参数要一一对应，也就是对应的参数类型必须要一样，反之则不行。

## 扩展

信号可以连接信号

一个信号连接多个槽函数   槽函数的执行顺序是随机的

槽函数可以使用Lambda表达式

信号连接之后可以用disconnect断开

# 对象树   

在Qt中，存在对象树的概念，他的功能是在一定程度上简化内存的释放。 

在基于QObject的类中或者继承了QObject类的子类，都会自动回收内存。所以说我们new出来的对象指定好父类，他就会自动回收。

例如： 以new的方式创建一个按钮，将它放在Widget的对象中，那么这个按钮他将会在这个Widget释放前自动释放掉。

# Lambda表达式  

在C++11中，Lambda表达式用于定义并创建匿名的函数对象，相当于一个匿名函数。  

Lambda表达式声明： [函数对象参数](操作符重载函数参数){函数体}

[]是识别一个lambda表达式的开始。

参数为`空`时，没有调用外面的任何局部变量

参数为`=`时，可以以值传递的方式调用Lambda表达式所在作用域的局部变量

参数为`&`时，可以以引用传递的方式调用Lambda表达式所在作用域的局部变量

参数为`this`时，可以调用Lambda表达式所在类的成员变量

也可以单独取一个或多个变量使用，使用`&`则为引用传递，否则为值传递

()这个是放函数参数的地方，同普通的函数参数一样，不过只能使用值传递和引用传递  

{} 函数体  

返回值类型使用`->类型名`写在函数体的前面，例如：[]()->int{return 1};

可修改标识符mutable 可以修改值传递拷贝出来的变量，改变不了本体 例如: []()mutable{};  

在我这里的学习中，要调用Lambda表达式还需要在函数体后加上() ,例如：[](){}();

Lambda表达式的作用就是在连接信号的时候可以代替槽函数的位置。 例如： cconnect(sender,signal,receiver,[](){ //这这里可以写更多的操作，更直观 })



