---
title: Linux基本知识2
date: 2019-06-08 14:09:52
tags: note
categories: Linux
---
继续
<!--more-->

# 用户与组

## 用户分类  
系统管理员(root)、系统用户(不可登录)、普通用户（可登录）。  
## 建立帐号  
系统会为用户帐号分配至少两个ID，一个是用户ID(UID)，一个是组ID(GID),管理员的两
个ID都为0，非管理员为1000～65535 。  

- 用户帐号及其相关信息均存放在/etc/passwd配置文件中，密码信息存放在/etc/shadow配置文件中  

|**/etc/passwd文件结构意义**|
|:-:|

|用户名称|用户密码|UID|GID|用户说明信息|用户家目录|用户的shell|
|:-:|:-:|:-:|:-:|:-:|:-:|:-:|
|root|x|0|0|root|/root|/bin/bash|

# 添加、修改与删除用户的命令

## useradd  
添加新的用户帐号命令  
useradd 参数选项 用户名  

|参数|作用|
|:-:|:-:|
|-d|制定用户家目录|
|-M|不创建家目录|
|-e|指定账户过期的时间，格式为MM/DD/YY or YYYY-MM-DD|
|-g|指定账户的主组群（存在的）|
|-G|指定账户的附属组，多组用逗号分隔|
|-n|不创建和用户帐号同名的私有用户组|
|-s|指定账户登录时使用的shell解释器|
|-u|指定用户的默认UID|


## passwd  
设置用户密码  
passwd 参数选项 用户账户名  

|参数|作用|
|:-:|:-:|
|-l|锁定用户，禁止其登录|
|-u|解除锁定，允许用户登录|
|-S|显示用户的密码是否被锁定，以及密码所采用的加密算法名称|
|-d|清空账户密码，将不能登录系统，除非重新设置密码|
|-stdin|允许通过标准输入修改密码|

## usermod  
修改用户属性  
usermod 参数选项 用户账户名

|参数|作用|
|:-:|:-:|
|-m,-d|重新指定用户的家目录并自动把旧的数据转移过去|
|-e|修改账户过期的时间|
|-g|修改主组群|
|-G|修改附属组|
|-l|修改用户名称|
|-L|锁定用户|
|-U|解锁用户|
|-s|修改用户登录时使用的shell解释器|
|-u|修改用户的UID|

## userdel  
删除用户  
userdel -r 用户账户名  

# 添加、修改和删除用户组的命令   
## groupadd  
增加一个新的用户组  
groupadd 参数选项 用户组名  

|参数|作用|
|:-:|:-:|
|-g|指定GID|

## groupmod   
修改用户组名信息  
groupmod 参数选项  用户组名  
 
|参数|作用|
|:-:|:-:|
|-g|修改GID|
|-n|修改组名|

## groupdel  
删除用户组名  
groupdel 用户组名

# 文件权限管理  

## 文件详细信息，共分七列，所含信息的含义如下:

1. 文件类型权限包含文件所属类型和用户对该文件的权限，共有11位或者10位，最后一位`.`与selinux和acl有关   

- 第一位用来描述文件类型，如下表所示:    

|第一位|描述|
|:-:|:-:|
|-|普通文件|
|d|目录文件|
|l|软链接文件|
|b|块设备|
|c|窜行端口设备，如键盘、鼠标等|
|s|套接字文件，用于进程间通信


- 后边的九位，没三位为一组，均是可读"r" 可写"w" 可执行"x" 参数的组合，前三，中三，后三分
    别代表所属用户(u)的权限，所属组(g)的权限和其他所有用户(o)的权限
- 文件权限的数字法，基于字符的rwx的权限计算而来，r(4)、w(2)、x(1)
2. 链接占用的节点数;普通文件的节点数和链接数有关，目录与目录下的所有目录及文件有关  
3. 文件所属用户   
4. 文件所属组  
5. 文件大小，kb为单位  
6. 最后一次修改日期
7. 文件名  

## 文件权限的更改  

1. chown  
更改文件的所属用户和所属组  
chown 参数 账户名 || :组名  文件名  
文件夹需要加-R  

2. chmod  
改变用户对文件的读写权限  
chmod 参数 ijk 文件名  

|参数|作用|
|:-:|:-:|
|ijk|文件权限的数组法来修改权限|
|-R|当文件是文件夹时需要|
|a|全部权限，以下参数的用法，例如：chmod u+w test|
|u|用户权限|
|g|组权限|
|o|其他组群权限|


3. umask 
设置需要减去的权限  
umask ijk  


|参数|作用|
|:-:|:-:|
|ijk|文件权限的数字法|
|无参数|查看预设值|

# 文件特殊权限  

## SUID  
在一个可执行文件加上s权限，任何人在执行该命令时会临时具有所属用户的权限  
chmod u+s 可执行文件  
1. SUID仅对命令有效  
2. 执行者要有x的权限  
3. 仅在执行时有效  
4. 执行者将具有所属用户的权限  

## SGID   
SGID针对命令是获得命令所属组的权限，针对目录的话，那么目录下创建的文件自动会继承目录所属组
chmod g+s 文件 || 目录  

## SBIT  
如果对一个目录加上SBIT权限，那么仅root用户和该目录下的文件拥有人才能删除该文件  
chmod o+t 文件 || 目录  

- 如果采用数字方式，在三位数字前再加上一位代表特殊权限，4代表SUID，2代表SGID，1代表SBIT  

# 文件隐藏属性与访问控制列表  
## chattr  
设置文件的隐藏权限  
chattr 参数 文件  

|参数|作用|
|:-:|:-|
|+i，-i|+可以让文件不能被删除，重命名，不能写入，添加数据，不能创建硬链接;-恢复|
|+a,-a|+让文件添加数据，不能删除，修改数据|

## lsattr  
显示文件的隐藏权限  
lsattr 参数 文件  

# 访问控制列表  
## setfacl  
管理设置文件/目录的ACL规则  
setfacl 参数 文件名  

|参数|作用|
|:-:|:-:|
|-R|对目录文件使用|
|-m|普通文件|
|-b|删除文件的ACL|  

## getfacl  
显示文件的ACL信息  
getfacl  文件名  

# su与sudo命令  
## su  
切换用户  
su 用户名  

## su -  
切换用户且重新读取环境变量  
su - 用户名  

## sudo  
以管理员身份运行命令  
sudo 命令  

# vim  
输入命令vimtutor自行学习  

# Gcc和G++  
## 编译和运行  
```
gcc/g++ -c 源代码文件名             //编译
gcc/g++ -o 可执行文件名  源代码文件     //生成可执行文件  
./可执行文件名      //执行文件  
```
